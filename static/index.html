<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ListenBrainz Wrapped</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="request.js"></script>
  </head>
  <body>
    <main class="page">
      <section class="card card--intro">
        <div class="card__body">
          <h1>ListenBrainz Wrapped</h1>
          <p class="intro-copy">
            Turn your ListenBrainz scrobbles into a shareable poster with your top artists,
            tracks, listening time, and favourite genre from the last 12 months.
          </p>
          <form id="wrapped-form" class="form" autocomplete="off" novalidate>
            <label class="form__label" for="username">ListenBrainz username</label>
            <div class="form__field-group">
              <input
                id="username"
                name="username"
                type="text"
                placeholder="e.g. rob"
                required
                minlength="2"
                autocomplete="off"
              >
              <button id="submit" type="submit" class="btn">Generate</button>
            </div>
            <p id="status-message" class="status-message" role="status" aria-live="polite" hidden></p>
          </form>
          <div class="form__secondary">
            <label class="form__label" for="color">Card theme</label>
            <select id="color" name="color">
              <option value="black">Midnight</option>
              <option value="purple">Twilight</option>
              <option value="yellow">Sunrise</option>
              <option value="pink">Bloom</option>
            </select>
          </div>
          <div class="actions">
            <button id="download" type="button" class="btn btn--secondary" aria-disabled="true">
              Download image
            </button>
            <span id="loading" class="loading" hidden>Preparing your wrapped...</span>
            <span id="download-error" class="error" hidden>
              Download unavailable: artist image could not be loaded.
            </span>
          </div>
        </div>
      </section>

      <section class="card card--preview">
        <div class="card__body">
          <canvas id="canvas" width="1080" height="1920" aria-label="Wrapped preview"></canvas>
        </div>
      </section>

      <section class="card card--details" aria-live="polite">
        <div class="card__body results" hidden>
          <h2>Your highlights</h2>
          <div class="results__grid">
            <div>
              <h3>Top artists</h3>
              <p id="top-artists"></p>
            </div>
            <div>
              <h3>Top tracks</h3>
              <p id="top-tracks"></p>
            </div>
            <div>
              <h3>Minutes listened</h3>
              <p id="listen-time"></p>
            </div>
            <div>
              <h3>Top genre</h3>
              <p id="top-genre"></p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <img id="artist-img" src="img/black.png" alt="" hidden>
  </body>
</html>
